!function(h,o){var a;"undefined"!=typeof yith_wapo_color_label_attr&&((a=function(t,a){this.$form=t,this.$attr=JSON.parse(yith_wapo_color_label_attr.attributes),this.$select=this.$form.find(".variations select"),this.$use_ajax=!1===this.$form.data("product_variations"),this.$xhr=null,this.variations_gallery=[],"undefined"==typeof this.$attr&&(this.$attr=[]),t.on("yith_wccl_form_initialized",{obj:this},this.init),this.$select.each(function(){this.setAttribute("data-default_value",this.value)}),this.resetForm(this),this.$form.hasClass("initialized")||this.$form.addClass("initialized").fadeIn().trigger("yith_wccl_form_initialized")}).prototype.styleOption=function(t,a,e,o){"colorpicker"===e?1===(o=Array.isArray(o)?o:o.split(",")).length?a.append(h("<span/>",{"class":"yith_wccl_value",css:{background:o}})):(a.append(h('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),a.find(".yith-wccl-bicolor").css({"border-bottom-color":o[0],"border-left-color":o[1]})):"image"===e?a.append(h("<img/>",{"class":"yith_wccl_value",src:o,alt:e})):"label"===e&&a.append(h("<span/>",{"class":"yith_wccl_value",text:o}))},a.prototype.addTooltip=function(t,a,e,o,i){var l,r;yith_wapo_color_label_attr.tooltip&&void 0!==a&&a&&!e.find(".yith_wccl_tooltip").length&&(l=h('<span class="yith_wccl_tooltip"></span>'),r=yith_wapo_color_label_attr.tooltip_pos+" "+yith_wapo_color_label_attr.tooltip_ani,"image"===o&&(a=a.toString().replace("{show_image}",'<img src="'+i+'" />')),l.addClass(r),e.append(l.html("<span>"+a+"</span>")))},a.prototype.handleSelect=function(t){var _=t.data.obj;_.$select.each(function(){var r=h(this),t=_.$attr[this.name],a=decodeURIComponent(this.name),n=r.parent().find(".select_box"),s=[],e=r.closest(".select-wrapper"),c=(e.length||(e=r.closest("td")).length||(e=r.parent()),void 0===t&&(t=_.$attr[a]),yith_wapo_color_label_attr.description&&!_.$form.find(".description_"+a).length&&void 0!==t&&t.descr&&(r.closest("tr").length?r.closest("tr").after('<tr class="description_'+a+'"><td colspan="2">'+t.descr+"</td></tr>"):e.append('<p class="description_'+a+'">'+t.descr+"</p>")),void 0!==t?t.type:r.data("type")),d=void 0!==t&&t.terms;void 0!==t&&t.terms&&void 0!==c&&c&&(r.addClass("yith_wccl_custom").hide(),e.addClass("yith_wccl_is_custom"),n.length&&yith_wapo_color_label_attr.grey_out||(n.remove(),n=h("<div />",{"class":"select_box_"+c+" select_box "+r.attr("name")}).insertAfter(r)),r.find("option").each(function(){var o,t,a,e,i,l=h(this).val();(d&&"undefined"!=typeof d[l]||void 0!==h(this).data("value")&&""!==h(this).data("value"))&&(s.push(l),o=h(this),t="select_option_"+c+" select_option",a=d&&"undefined"!=typeof d[l]?d[l].value:h(this).data("value"),e=d&&"undefined"!=typeof d[l]?d[l].tooltip:h(this).data("tooltip"),(i=n.find('[data-value="'+l+'"]')).length||(l!==r.val()&&l!==r.attr("data-default_value")||(t+=" selected"),(i=h("<div/>",{"class":t,"data-value":l}).appendTo(n)).off("click").on("click",function(t){var a=h(this).hasClass("inactive"),e=h(this).hasClass("selected");a&&(a=r.data("attribute_name")||r.attr("name"),!function(t,a,e){var o=!1,i=t.data("product_variations"),t=t.find(".variations select"),l=[];h.each(t,function(){var t=h(this).data("attribute_name")||h(this).attr("name");l[t]=e===t?a:h(this).val()});for(var r=0;r<i.length;r++){var n,s,c=i[r];if(o)break;for(n in(o=c).attributes)!c.attributes.hasOwnProperty(n)||(s=c.attributes[n])!==l[n]&&""!==s&&(o=!1)}return o}(_.$form,h(this).data("value"),a)?_.resetForm(_):r.val("").change()),(e?r.val(""):r.val(o.val())).change(),h(this).toggleClass("selected"),h(this).siblings().removeClass("selected")}),_.styleOption(_,i,c,a),_.addTooltip(_,e,i,c,a)))}),n.children().each(function(){var t=h(this).data("value")+"";-1===h.inArray(t,s)?h(this).addClass("inactive"):h(this).removeClass("inactive")}),_.$form.trigger("yith_wccl_select_initialized",[r,t]))})},a.prototype.setDefaultValue=function(t){t=t.data.obj;t.$select.each(function(){h(this).val(h(this).attr("data-default_value"))}),t.$select.first().change()},a.prototype.handleCheckVariations=function(t,a,e){var o=t.data.obj;e||o.$found&&(t.data.obj.$found=!1,!o.$use_ajax)||o.$changed&&(t.data.obj.$changed=!1)},a.prototype.handleFoundVariation=function(t,a){var e=t.data.obj;e.$use_ajax?e.handleSelect(t):e.$select.last().trigger("focusin")},a.prototype.handleVariationGallery=function(t,a){var e,o=t.data.obj,i=h(yith_wapo_color_label_attr.single_gallery_selector);i.length&&(null!==o.$xhr&&o.$xhr.abort(),(e=void 0!==a?a.variation_id:o.$form.find('input[name="product_id"]').val())&&void 0!==e&&(undefined!==o.variations_gallery[e]?o.loadVariationGallery(o.variations_gallery[e],i,a):o.$xhr=h.ajax({url:yith_wapo_color_label_attr.ajaxurl.toString().replace("%%endpoint%%",yith_wapo_color_label_attr.actionVariationGallery),data:{action:yith_wapo_color_label_attr.actionVariationGallery,id:e,context:"frontend"},type:"POST",dataType:"html",beforeSend:function(){i.addClass("loading-gallery")},success:function(t){i.removeClass("loading-gallery"),o.$xhr=null,t&&(o.variations_gallery[e]=t,o.loadVariationGallery(t,i,a))}})))},a.prototype.loadVariationGallery=function(t,a,e){a.replaceWith(t).fadeIn(),"undefined"!=typeof wc_single_product_params&&h(yith_wapo_color_label_attr.single_gallery_selector).wc_product_gallery(wc_single_product_params),this.$form.wc_variations_image_update(e),h(o).trigger("yith_wccl_product_gallery_loaded"),h(o).trigger("wdReplaceMainGallery"),h(o).trigger("wdResetVariation")},a.prototype.resetForm=function(t){t.$form.find("div.select_option").removeClass("selected inactive"),t.$select.val("").change(),t.$form.trigger("reset_data","yith_wccl")},a.prototype.onReset=function(t){t.data.obj.$form.find(".select_option.selected").removeClass("selected inactive")},a.prototype.init=function(t){var a=t.data.obj;a.$form.on("click.wc-variation-form",".reset_variations",{obj:a},a.onReset),a.$form.on("woocommerce_update_variation_values",{obj:a},a.handleSelect),a.$form.on("check_variations",{obj:a},a.handleCheckVariations),a.$form.on("found_variation",{obj:a},a.handleFoundVariation),yith_wapo_color_label_attr.enable_handle_variation_gallery&&(a.$form.on("found_variation",{obj:a},a.handleVariationGallery),a.$form.on("reset_image",{obj:a},a.handleVariationGallery)),a.handleSelect(t),a.$select.each(function(){var t=h(this).attr("data-default_value");h(this).removeAttr("data-default_value"),h(this).val(t)})},h.yith_wccl=function(t){forms=h(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===t&&(t=[]),forms.each(function(){new a(h(this))})},h(o).on("yith_wccl_product_gallery_loaded",function(){var t;"undefined"==typeof mkdf||"function"!=typeof mkdf.modules.common.mkdfPrettyPhoto||(t=h(".mkdf-woo-single-page.mkdf-woo-single-has-pretty-photo .images .woocommerce-product-gallery__image")).length&&(t.children("a").attr("data-rel","prettyPhoto[woo_single_pretty_photo]"),mkdf.modules.common.mkdfPrettyPhoto()),"undefined"!=typeof Flatsome&&(Flatsome.attach(h(".product-gallery")),h(".zoom-button").click(function(t){t.preventDefault(),h(".product-gallery-slider").find(".is-selected a").click()}))}),h(o).ready(function(){h.yith_wccl()}))}(jQuery,(window,document));